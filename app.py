import streamlit as st
import pandas as pd

st.set_page_config(page_title="Payroll App", layout="wide")

# CSS Î³Î¹Î± ÎºÏŒÎºÎºÎ¹Î½Î± Î³ÏÎ¬Î¼Î¼Î±Ï„Î± Î±Î½ Ï„Î¿ ÏƒÏÎ½Î¿Î»Î¿ Ï‰ÏÏÎ½ ÎµÎ¯Î½Î±Î¹ Î»Î¬Î¸Î¿Ï‚
st.markdown("""
    <style>
    .error-msg { color: #FF0000; font-weight: bold; font-size: 18px; }
    .success-msg { color: #008000; font-weight: bold; }
    </style>
    """, unsafe_allow_html=True)

# --- Î”Î•Î”ÎŸÎœÎ•ÎÎ‘ ÎšÎ›Î™ÎœÎ‘ÎšÎ™Î©Î (C254:D280) ---
klimakia_data = {
    "Î‘": 2589.31, "Î’": 2508.87, "Î“": 2428.41, "Î”": 2364.07,
    "1": 2234.94, "2": 2187.53, "3": 2087.69, "4": 1963.82,
    "5": 1892.43, "6": 1717.38, "7": 1667.92, "8": 1570.34,
    "9": 1454.83, "10": 1321.14, "11": 1309.80, "12": 1299.21,
    "13": 1285.07, "14": 1275.99, "15": 1266.41, "16": 1258.08,
    "17": 1224.28, "18": 1216.95, "19": 1202.63, "20": 1195.82,
    "21": 1195.82, "22": 1195.82, "23": 1195.82
}

st.title("ğŸ“Š Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚ ÎœÎ¹ÏƒÎ¸Î¿Î´Î¿ÏƒÎ¯Î±Ï‚")

# --- ÎšÎ›Î™ÎœÎ‘ÎšÎ™ÎŸ & Î’Î‘Î£Î™ÎšÎŸÎ£ (D5 -> E5) ---
d5_selection = st.selectbox("Î•Ï€Î¹Î»Î­Î¾Ï„Îµ ÎœÎ¹ÏƒÎ¸Î¿Î»Î¿Î³Î¹ÎºÏŒ ÎšÎ»Î¹Î¼Î¬ÎºÎ¹Î¿ (D5):", list(klimakia_data.keys()))
e5 = klimakia_data[d5_selection]
st.info(f"Î’Î±ÏƒÎ¹ÎºÏŒÏ‚ ÎœÎ¹ÏƒÎ¸ÏŒÏ‚ (E5): {e5:,.2f} â‚¬")

# --- Î¥Î ÎŸÎ Î›Î‘Î™Î£Î™ÎŸ 1: Î©Î¡Î•Î£ (D17, D18, D19) ---
with st.container(border=True):
    st.subheader("ğŸ•’ ÎšÎ±Ï„Î±Î½Î¿Î¼Î® Î©ÏÏÎ½ ÎœÎ®Î½Î±")
    c1, c2, c3 = st.columns(3)
    with c1: d17 = st.number_input("ÎÏÎµÏ‚ ÎšÎ±Î½. Î‘Ï€Î±ÏƒÏ‡ÏŒÎ»Î·ÏƒÎ·Ï‚ (D17)", value=162.50)
    with c2: d18 = st.number_input("ÎÏÎµÏ‚ Î†Î´ÎµÎ¹Î±Ï‚ (D18)", value=0.0)
    with c3: d19 = st.number_input("ÎÏÎµÏ‚ Î‘Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚ (D19)", value=0.0)
    
    g19 = d17 + d18 + d19
    if g19 != 162.50:
        st.markdown(f'<p class="error-msg">âš ï¸ Î Î¡ÎŸÎ£ÎŸÎ§Î—: Î£ÏÎ½Î¿Î»Î¿ Î©ÏÏÎ½ {g19:.2f} (Î ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ 162.50)</p>', unsafe_allow_html=True)
    else:
        st.markdown('<p class="success-msg">âœ… Î£ÏÎ½Î¿Î»Î¿ Î©ÏÏÎ½ ÏƒÏ‰ÏƒÏ„ÏŒ (162.50)</p>', unsafe_allow_html=True)

# --- Î•ÎÎ”Î™Î‘ÎœÎ•Î£ÎŸÎ™ Î¥Î ÎŸÎ›ÎŸÎ“Î™Î£ÎœÎŸÎ™ (Î©ÏÎ¿Î¼Î¯ÏƒÎ¸Î¹Î±) ---
# (Î•Î´Ï Î¸Î± Î¼Ï€Î¿Ï…Î½ Î¿Î¹ ÎµÎ½Î´Î¹Î¬Î¼ÎµÏƒÎ¿Î¹ Ï„ÏÏ€Î¿Î¹ Î³Î¹Î± E6, E9, E14 ÎºÎ»Ï€. ÏŒÏ„Î±Î½ Ï„Î¿Ï…Ï‚ Î¿ÏÎ¯ÏƒÎ¿Ï…Î¼Îµ Ï€Î»Î®ÏÏ‰Ï‚)
# Î ÏÎ¿Ï‚ Ï„Î¿ Ï€Î±ÏÏŒÎ½ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Î¼Î¹Î± Î±Ï€Î»Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î· ÏÎ¿Î® Î³Î¹Î± Ï„Î± D175 ÎºÎ±Î¹ D177
e14 = e5  # Î ÏÎ¿ÏƒÏ‰ÏÎ¹Î½ÏŒ Î¼Î­Ï‡ÏÎ¹ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎ¿Ï…Î¼Îµ Ï„Î± ÎµÏ€Î¹Î´ÏŒÎ¼Î±Ï„Î±
d175 = e14 / 162.50
d177 = (e14 + 178.43) / 162.50 # Î¤Î¿ 178.43 ÎµÎ¯Î½Î±Î¹ Ï„Ï…Ï‡Î±Î¯Î¿ Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î³Î¹Î± Ï„Î¿ "Î‘Ï…Î¾Î·Î¼Î­Î½Î¿"

# --- Î¥Î Î•Î¡Î©Î¡Î™Î•Î£ (29, 30, 31) ---
st.subheader("âš¡ Î¥Ï€ÎµÏÏ‰ÏÎ¯ÎµÏ‚")
col_a, col_b, col_c = st.columns(3)
with col_a: d29 = st.number_input("ÎÏÎµÏ‚ Î¥Ï€ÎµÏÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ 20% (D29)", 0.0)
with col_b: d30 = st.number_input("ÎÏÎµÏ‚ Î¥Ï€ÎµÏÏ‰ÏÎ¯Î±Ï‚ 1.4 (D30)", 0.0)
with col_c: d31 = st.number_input("ÎÏÎµÏ‚ Î¥Ï€ÎµÏÏ‰ÏÎ¯Î±Ï‚ Î§.Î‘. 1.2 (D31)", 0.0)

e29 = (d177 * d29) * 1.20
e30 = d30 * d177 * 1.40
e31 = (d177 * d31) * 1.20

# --- Î¥Î ÎŸÎ Î›Î‘Î™Î£Î™ÎŸ 2: Î Î¡ÎŸÎ£Î‘Î¥ÎÎ—Î£Î•Î™Î£ ÎÎ¥Î§Î¤Î‘Î£ (33, 34, 35, 36) ---
with st.container(border=True):
    st.subheader("ğŸŒ™ Î ÏÎ¿ÏƒÎ±Ï…Î¾Î®ÏƒÎµÎ¹Ï‚ ÎÏÏ‡Ï„Î±Ï‚")
    n1, n2 = st.columns(2)
    with n1:
        d33 = st.number_input("ÎÏÎµÏ‚ ÎÏÏ‡Ï„Î±Ï‚ Î‘Ï€Î»Î­Ï‚ (D33)", 0.0)
        d34 = st.number_input("ÎÏÎµÏ‚ Î¥Ï€ÎµÏÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ ÎÏÏ‡Ï„Î±Ï‚ (D34)", 0.0)
    with n2:
        d35 = st.number_input("ÎÏÎµÏ‚ Î¥Ï€ÎµÏÏ‰ÏÎ¯Î±Ï‚ ÎÏÏ‡Ï„Î±Ï‚ (D35)", 0.0)
        d36 = st.number_input("ÎÏÎµÏ‚ Î¥Ï€ÎµÏÏ‰ÏÎ¯Î±Ï‚ Î§.Î‘. ÎÏÏ‡Ï„Î±Ï‚ (D36)", 0.0)

    e33 = d33 * d175 * 0.25
    e34 = (d177 * d34) * 1.20 * 0.25
    e35 = (d177 * d35) * 1.40 * 0.25
    e36 = (d177 * d36) * 1.80 * 0.25

# --- Î•ÎœÎ¦Î‘ÎÎ™Î£Î— Î‘Î ÎŸÎ¤Î•Î›Î•Î£ÎœÎ‘Î¤Î©Î ---
st.divider()
res_col1, res_col2 = st.columns(2)
with res_col1:
    st.write(f"Î Î¿ÏƒÏŒ Î¥Ï€ÎµÏÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ (E29): **{e29:.2f} â‚¬**")
    st.write(f"Î Î¿ÏƒÏŒ Î¥Ï€ÎµÏÏ‰ÏÎ¯Î±Ï‚ 1.4 (E30): **{e30:.2f} â‚¬**")
    st.write(f"Î Î¿ÏƒÏŒ Î¥Ï€ÎµÏÏ‰ÏÎ¯Î±Ï‚ Î§.Î‘. (E31): **{e31:.2f} â‚¬**")
with res_col2:
    st.write(f"Î ÏÎ¿Ïƒ. ÎÏÏ‡Ï„Î±Ï‚ Î‘Ï€Î»Î® (E33): **{e33:.2f} â‚¬**")
    st.write(f"Î ÏÎ¿Ïƒ. Î¥Ï€ÎµÏÎµÏÎ³. ÎÏÏ‡Ï„Î±Ï‚ (E34): **{e34:.2f} â‚¬**")
    st.write(f"Î ÏÎ¿Ïƒ. Î¥Ï€ÎµÏÏ‰Ï. ÎÏÏ‡Ï„Î±Ï‚ (E35): **{e35:.2f} â‚¬**")
    st.write(f"Î ÏÎ¿Ïƒ. Î¥Ï€ÎµÏÏ‰Ï. Î§.Î‘. ÎÏÏ‡Ï„Î±Ï‚ (E36): **{e36:.2f} â‚¬**")
