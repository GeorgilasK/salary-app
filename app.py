import streamlit as st

# --- CSS Î“Î™Î‘ Î¤ÎŸ ÎšÎŸÎšÎšÎ™ÎÎŸ Î§Î¡Î©ÎœÎ‘ ---
st.markdown("<style>.error-msg { color: #FF0000; font-weight: bold; }</style>", unsafe_allow_html=True)

# --- Î”Î•Î”ÎŸÎœÎ•ÎÎ‘ ÎšÎ›Î™ÎœÎ‘ÎšÎ™Î©Î ---
klimakia_data = {
    "Î‘": 2589.31, "Î’": 2508.87, "Î“": 2428.41, "Î”": 2364.07,
    "1": 2234.94, "2": 2187.53, "3": 2087.69, "4": 1963.82,
    "5": 1892.43, "6": 1717.38, "7": 1667.92, "8": 1570.34,
    "9": 1454.83, "10": 1321.14, "11": 1309.80, "12": 1299.21,
    "13": 1285.07, "14": 1275.99, "15": 1266.41, "16": 1258.08,
    "17": 1224.28, "18": 1216.95, "19": 1202.63, "20": 1195.82,
    "21": 1195.82, "22": 1195.82, "23": 1195.82
}

st.title("ğŸ“Š Excel Payroll Layout")

# --- Î“Î¡Î‘ÎœÎœÎ— 5 ---
d5_sel = st.selectbox("ÎœÎ¹ÏƒÎ¸Î¿Î»Î¿Î³Î¹ÎºÏŒ ÎšÎ»Î¹Î¼Î¬ÎºÎ¹Î¿ (D5):", list(klimakia_data.keys()))
e5 = klimakia_data[d5_sel]
st.write(f"Î“ÏÎ±Î¼Î¼Î® 5 - Î¤Î¹Î¼Î® ÎšÎ»Î¹Î¼Î±ÎºÎ¯Î¿Ï…: {e5:,.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 6 ---
d6 = st.number_input("Î§ÏÎ¿Î½Î¿ÎµÏ€Î¯Î´Î¿Î¼Î± % (D6) - Î‘ÎºÎ­ÏÎ±Î¹Î¿Ï‚", step=1, value=0)
e6 = e5 * (d6 / 100)
st.write(f"Î“ÏÎ±Î¼Î¼Î® 6 - Î Î¿ÏƒÏŒ Î§ÏÎ¿Î½Î¿ÎµÏ€Î¹Î´ÏŒÎ¼Î±Ï„Î¿Ï‚ (E6): {e6:,.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 7 ---
d7_choice = st.selectbox("Î•Î Î™Î”ÎŸÎœÎ‘ Î“Î‘ÎœÎŸÎ¥ (D7):", ["ÎŸÎ§Î™", "ÎÎ‘Î™"])
e7 = (e5 * 0.10) if d7_choice == "ÎÎ‘Î™" else 0.0
st.write(f"Î“ÏÎ±Î¼Î¼Î® 7 - Î Î¿ÏƒÏŒ Î“Î¬Î¼Î¿Ï… (E7): {e7:,.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 9 ---
d9 = st.number_input("Î Î¿Î»Ï…ÎµÏ„Î¯Î± (D9) - Î‘ÎºÎ­ÏÎ±Î¹Î¿Ï‚", step=1, value=0)
e9 = float(d9)
st.write(f"Î“ÏÎ±Î¼Î¼Î® 9 - Î Î¿ÏƒÏŒ Î Î¿Î»Ï…ÎµÏ„Î¯Î±Ï‚ (E9): {e9:,.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 11 ---
e11 = e5 + e6
st.info(f"Î²11: Î’Î‘Î£Î™ÎšÎŸÎ£ ÎœÎ™Î£Î˜ÎŸÎ£ (E11): {e11:,.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 12 ---
e12 = e7 + e9
st.info(f"Î²12: Î Î¡ÎŸÎ£Î‘Î¥ÎÎ—Î£Î•Î™Î£ ÎœÎ™Î£Î˜ÎŸÎ¥ (E12): {e12:,.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 14 ---
e14 = e11 + e12
st.metric("Î“ÏÎ±Î¼Î¼Î® 14 - ÎšÎ±Ï„Î±Î²Î±Î»Î»ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î‘Ï€Î¿Î´Î¿Ï‡Î­Ï‚ (E14)", f"{e14:,.2f} â‚¬")

st.divider()

# --- Î“Î¡Î‘ÎœÎœÎ•Î£ 17, 18, 19 (Layout Excel) ---
col17, col18, col19 = st.columns(3)
d17 = col17.number_input("ÎÏÎµÏ‚ ÎšÎ±Î½. Î‘Ï€Î±ÏƒÏ‡ÏŒÎ»Î·ÏƒÎ·Ï‚ (D17)", value=162.50, step=0.50)
d18 = col18.number_input("ÎÏÎµÏ‚ Î†Î´ÎµÎ¹Î±Ï‚ (D18)", value=0.0, step=0.50)
d19 = col19.number_input("ÎÏÎµÏ‚ Î‘Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚ (D19)", value=0.0, step=0.50)

# Î•Î›Î•Î“Î§ÎŸÎ£ 162,50
g19 = d17 + d18 + d19
if g19 != 162.50:
    st.markdown(f'<p class="error-msg">âš ï¸ Î Î¡ÎŸÎ£ÎŸÎ§Î—: Î£ÏÎ½Î¿Î»Î¿ Î©ÏÏÎ½ {g19:.2f} (Î ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ 162.50)</p>', unsafe_allow_html=True)

st.divider()

# --- Î“Î¡Î‘ÎœÎœÎ— 21 ---
st.write("**Î²21: Î•Î Î™Î”ÎŸÎœÎ‘ Î’Î‘Î¡Î”Î™Î‘Î£ Î‘Î ÎŸ ÎšÎ‘Î. Î‘Î Î‘Î£Î§.(0201)**")
c21 = st.number_input("ÎÏÎµÏ‚ Î’Î¬ÏÎ´Î¹Î±Ï‚ (C21):", value=162.5, step=0.5)
e21 = 1570.34 * 0.1136 
st.write(f"Î Î¿ÏƒÏŒ Î•21: {e21:,.2f} â‚¬")
st.caption("f21: 11,36% ÎµÏ€Î¯ Ï„Î¿Ï… 8Î¿Ï… ÎºÎ»Î¹Î¼Î±ÎºÎ¯Î¿Ï…")

# --- Î“Î¡Î‘ÎœÎœÎ— 22 ---
st.write("**Î²22: Î•Î Î™Î”.ÎŸÎ™Îš.Î’Î‘Î¡Î©Î Î‘Î ÎŸ ÎšÎ‘Î.Î‘Î Î‘Î£Î§.**")
d22 = st.selectbox("Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î Î±Î¹Î´Î¹ÏÎ½ (D22):", [0, 1, 2, 3, 4, 5])
family_map = {0: 0, 1: 29.35, 2: 58.70, 3: 91.09, 4: 155.69, 5: 220.29}
e22 = family_map[d22]
st.write(f"Î Î¿ÏƒÏŒ Î•22: {e22:,.2f} â‚¬")
st.caption("f22: (1-2 Ï€Î±Î¹Î´Î¹Î¬ x 29,35e // 3Î¿ 32,39e // 4+ x 64,6e)")

# --- Î“Î¡Î‘ÎœÎœÎ— 177 (Î¥Î ÎŸÎ›ÎŸÎ“Î™Î£ÎœÎŸÎ£ D177) ---
d177 = (e14 + e21 + e22) / d17 if d17 > 0 else 0.0
st.success(f"Î“ÏÎ±Î¼Î¼Î® 177 - Î©ÏÎ¿Î¼Î¯ÏƒÎ¸Î¹Î¿ Î¥Ï€ÎµÏÏ‰ÏÎ¹ÏÎ½ (D177): {d177:.2f} â‚¬")

st.divider()

# --- Î“Î¡Î‘ÎœÎœÎ•Î£ 29, 30, 31 ---
d29 = st.number_input("Î²29: 41 Î¥Î Î•Î¡Î•Î¡Î“Î‘Î£Î™Î‘ 20%", step=1, value=0)
e29 = (d177 * d29) * 1.20
st.write(f"Î Î¿ÏƒÏŒ Î•29: {e29:.2f} â‚¬")

d30 = st.number_input("Î²30: Î¥Î Î•Î¡Î©Î¡Î™Î‘ Îœ.Î‘. 1,4 1-150", step=1, value=0)
e30 = (d177 * d30) * 1.40
st.write(f"Î Î¿ÏƒÏŒ Î•30: {e30:.2f} â‚¬")

d31 = st.number_input("Î²31: 51 Î¥Î Î•Î¡Î©Î¡Î™Î‘ Î§.Î‘. 120%", step=1, value=0)
e31 = (d177 * d31) * 1.20
st.write(f"Î Î¿ÏƒÏŒ Î•31: {e31:.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 32 (ÎšÎ•ÎÎ—) ---
st.write("") 

# --- Î“Î¡Î‘ÎœÎœÎ•Î£ 33-36 (ÎÎ¥Î§Î¤Î•Î¡Î™ÎÎ‘) ---
d33 = st.number_input("Î²33: Î Î¡ÎŸÎ£Î‘Î¥ÎÎ—Î£Î— ÎÎ¥Î§Î¤Î‘Î£", step=1, value=0)
# Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ D175 (e14/162.50)
e33 = d33 * (e14 / 162.50) * 0.25
st.write(f"Î Î¿ÏƒÏŒ Î•33: {e33:.2f} â‚¬")

d34 = st.number_input("Î²34: 43 Î Î¡ÎŸÎ£.Î¥Î Î•Î¡Î•Î¡Î“Î‘Î£Î™Î‘Î£ ÎÎ¥ÎšÎ¤Î‘Î£ 20%", step=1, value=0)
e34 = (d177 * d34) * 1.20 * 0.25
st.write(f"Î Î¿ÏƒÏŒ Î•34: {e34:.2f} â‚¬")

d35 = st.number_input("Î²35: Î Î¡ÎŸÎ£.Î¥Î Î•Î¡Î©Î¡Î™Î‘Î£ ÎÎ¥Î§Î¤Î‘Î£", step=1, value=0)
e35 = (d177 * d35) * 1.40 * 0.25
st.write(f"Î Î¿ÏƒÏŒ Î•35: {e35:.2f} â‚¬")

d36 = st.number_input("Î²36: Î Î¡ÎŸÎ£.Î¥Î Î•Î¡Î©Î¡Î™Î‘Î£ ÎÎ¥ÎšÎ¤Î‘Î£ Î§.A. 120%", step=1, value=0)
e36 = (d177 * d36) * 1.80 * 0.25
st.write(f"Î Î¿ÏƒÏŒ Î•36: {e36:.2f} â‚¬")

# --- Î“Î¡Î‘ÎœÎœÎ— 37 (ÎšÎ•ÎÎ—) ---
st.write("")
